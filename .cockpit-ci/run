#!/bin/sh

# This is the expected entry point for Cockpit CI;

set -eu

# linters are off by default for production builds, but we want to run them in CI
export LINT=1

TEST_SCENARIO=${TEST_SCENARIO:-}

if [ "$TEST_SCENARIO" = "devel" ]; then
    export NODE_ENV=development
    export RUN_TESTS_OPTIONS=--coverage
fi

./autogen.sh && ./configure && make webui-tests
